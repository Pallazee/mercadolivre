<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Kit 05 Espuma de Carnaval 400ml | Mercado Livre</title>

  <!-- Fonte semelhante ao Mercado Livre -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="ml-header">
  Mercado Livre
</header>

<nav class="breadcrumb">
  <a href="#">Voltar</a>
  <span>|</span>
  <a href="#">Festas e Lembrancinhas</a>
  <span>›</span>
  <a href="#">Artigos para Festas</a>
  <span>›</span>
  <a href="#">Kits de Festa</a>
  <span>›</span>
  <span class="current">Aniversário</span>
</nav>

<div class="ml-container">

  <!-- GALERIA -->
  <div class="ml-left">
    <img id="imagemPrincipal" src="img1.jpg" alt="Produto">

    <div class="thumbs">
      <img src="img1.jpg" onclick="trocarImagem(this.src)">
      <img src="img2.jpg" onclick="trocarImagem(this.src)">
      <img src="img3.jpg" onclick="trocarImagem(this.src)">
    </div>
  </div>

  <!-- INFORMAÇÕES -->
  <div class="ml-center">

    <div class="title-row">
      <h1>Kit 05 Espuma de Carnaval da Alegria – 400ml</h1>
      <div class="favorite" onclick="toggleFavorite()">❤</div>
    </div>

   <div class="rating">
  <div class="stars" id="stars">
    <span data-value="1">★</span>
    <span data-value="2">★</span>
    <span data-value="3">★</span>
    <span data-value="4">★</span>
    <span data-value="5">★</span>
  </div>
  <span class="score" id="score">4.7</span>
  <span class="reviews">(18)</span>
</div>


    <div class="price">R$ 79,90</div>
    <div class="installments">em até 3x de R$ 26,63 sem juros</div>

    <div class="frete-box">
      <span class="frete-gratis">Frete grátis</span>
      <input id="cep" placeholder="Digite seu CEP">
      <button class="link-btn" onclick="calcularFrete()">Calcular prazo</button>
      <div id="freteResultado"></div>
    </div>

    <div class="trust">
      ✔ Produto com nota fiscal<br>
      ✔ Envio rápido para todo o Brasil<br>
      ✔ Pagamento 100% seguro
    </div>

  </div>

  <!-- COMPRA -->
  <div class="ml-right">
    <button class="buy-btn" onclick="comprar()">Comprar agora</button>
  </div>

</div>

<footer>
  © 2026 - Compra segura | Mercado Pago
</footer>

<script>
let freteValor = 0;

function calcularFrete() {
  const cep = document.getElementById("cep").value.replace("-", "");
  const resultado = document.getElementById("freteResultado");

  if (cep.length !== 8) {
    resultado.innerHTML = "CEP inválido";
    return;
  }

  resultado.innerHTML = "Chegará grátis entre 3 e 7 dias úteis";
}

function trocarImagem(src) {
  document.getElementById("imagemPrincipal").src = src;
}

function toggleFavorite() {
  document.querySelector('.favorite').classList.toggle('active');
}

function comprar() {
  fetch('/create_preference', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ frete: freteValor })
  })
  .then(res => res.json())
  .then(data => {
    if (data.init_point) window.location.href = data.init_point;
    else alert("Erro ao iniciar pagamento");
  });
}
const stars = document.querySelectorAll("#stars span");
const score = document.getElementById("score");

let currentRating = 4.7;

// pinta estrelas iniciais (4.7 ≈ 5 estrelas)
paintStars(Math.round(currentRating));

stars.forEach(star => {
  star.addEventListener("mouseover", () => {
    paintStars(star.dataset.value);
  });

  star.addEventListener("mouseout", () => {
    paintStars(Math.round(currentRating));
  });

  star.addEventListener("click", () => {
    currentRating = star.dataset.value;
    score.innerText = currentRating;
    paintStars(currentRating);
  });
});

function paintStars(value) {
  stars.forEach(star => {
    if (star.dataset.value <= value) {
      star.classList.add("active");
    } else {
      star.classList.remove("active");
    }
  });
}

</script>

</body>
</html>
