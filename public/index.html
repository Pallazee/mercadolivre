<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Kit 05 Espuma de Carnaval 400ml | Mercado Livre</title>

  <!-- Fonte semelhante ao Mercado Livre -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="ml-header">
  Mercado Livre
</header>

<nav class="breadcrumb">
  <a href="#">Voltar</a>
  <span>|</span>
  <a href="#">Festas e Lembrancinhas</a>
  <span>â€º</span>
  <a href="#">Artigos para Festas</a>
  <span>â€º</span>
  <a href="#">Kits de Festa</a>
  <span>â€º</span>
  <span class="current">AniversÃ¡rio</span>
</nav>

<div class="ml-container">

  <!-- GALERIA -->
  <div class="ml-left">
    <img id="imagemPrincipal" src="img1.jpg" alt="Produto">

    <div class="thumbs">
      <img src="img1.jpg" onclick="trocarImagem(this.src)">
      <img src="img2.jpg" onclick="trocarImagem(this.src)">
      <img src="img3.jpg" onclick="trocarImagem(this.src)">
    </div>
  </div>

  <!-- INFORMAÃ‡Ã•ES -->
  <div class="ml-center">

    <div class="title-row">
      <h1>Kit 05 Espuma de Carnaval da Alegria â€“ 400ml</h1>
      <span class="badge-sold">ğŸ”¥ +500 vendidos</span>
      <div class="favorite" onclick="toggleFavorite()">â¤</div>
    </div>

   <div class="rating">
  <div class="stars" id="stars">
    <span data-value="1">â˜…</span>
    <span data-value="2">â˜…</span>
    <span data-value="3">â˜…</span>
    <span data-value="4">â˜…</span>
    <span data-value="5">â˜…</span>
  </div>
  <span class="score" id="score">4.7</span>
  <span class="reviews">(18)</span>
</div>


    <div class="price">R$ 79,90</div>
    <div class="installments">em atÃ© 3x de R$ 26,63 sem juros</div>

    <div class="frete-box">
      <span class="frete-gratis">Frete grÃ¡tis</span>
      <input id="cep" placeholder="Digite seu CEP">
      <button class="link-btn" onclick="calcularFrete()">Calcular prazo</button>
      <div id="freteResultado"></div>
    </div>

    <div class="trust">
      âœ” Produto com nota fiscal<br>
      âœ” Envio rÃ¡pido para todo o Brasil<br>
      âœ” Pagamento 100% seguro
    </div>

  </div>

  <!-- COMPRA -->
  <div class="ml-right">
    <button class="buy-btn" onclick="comprar()">Comprar agora</button>
  </div>

</div>
<div class="reviews-container">
  <h3>AvaliaÃ§Ãµes do produto</h3>

  <div id="reviews-list"></div>

  <button id="loadMore" class="load-more">
    Ver mais avaliaÃ§Ãµes
  </button>
</div>


<footer>
  Â© 2026 - Compra segura | Mercado Pago
</footer>
<script>
let freteValor = 0;

function calcularFrete() {
  const cep = document.getElementById("cep").value.replace("-", "");
  const resultado = document.getElementById("freteResultado");

  if (cep.length !== 8) {
    resultado.innerHTML = "CEP invÃ¡lido";
    return;
  }

  resultado.innerHTML = "ChegarÃ¡ grÃ¡tis entre 3 e 7 dias Ãºteis";
}

function trocarImagem(src) {
  document.getElementById("imagemPrincipal").src = src;
}

function toggleFavorite() {
  document.querySelector('.favorite').classList.toggle('active');
}

function comprar() {
  fetch('/create_preference', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ frete: freteValor })
  })
  .then(res => res.json())
  .then(data => {
    if (data.init_point) window.location.href = data.init_point;
    else alert("Erro ao iniciar pagamento");
  });
}

// ===== SISTEMA DE ESTRELAS COM MÃ‰DIA REAL =====
const stars = document.querySelectorAll("#stars span");
const score = document.getElementById("score");

// avaliaÃ§Ãµes iniciais (simulando ML)
let ratings = [5, 5, 4, 5, 4, 5, 5, 4, 5, 5, 4, 5, 5, 5, 4, 5, 5, 5];

function calcularMedia() {
  const total = ratings.reduce((a, b) => a + b, 0);
  return (total / ratings.length).toFixed(1);
}

function pintarEstrelas(valor) {
  stars.forEach(star => {
    star.classList.toggle("active", star.dataset.value <= valor);
  });
}

// inicializaÃ§Ã£o
score.innerText = calcularMedia();
pintarEstrelas(Math.round(calcularMedia()));

stars.forEach(star => {
  star.addEventListener("mouseover", () => {
    pintarEstrelas(star.dataset.value);
  });

  star.addEventListener("mouseout", () => {
    pintarEstrelas(Math.round(calcularMedia()));
  });

  star.addEventListener("click", () => {
    ratings.push(Number(star.dataset.value));
    score.innerText = calcularMedia();
    pintarEstrelas(Math.round(calcularMedia()));
  });
});

// ===== EXPANDIR / RECOLHER REVIEWS =====
document.querySelectorAll(".expand-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const review = btn.parentElement;
    review.classList.toggle("expanded");
    btn.innerText = review.classList.contains("expanded")
      ? "Ver menos"
      : "Ver mais";
  });
});
// ===== REVIEWS PAGINADOS =====
const reviewsData = [
  { stars: "â­â­â­â­â­", name: "Ana Paula", city: "SÃ£o Paulo/SP", text: "Produto chegou rÃ¡pido e fez sucesso na festa!" },
  { stars: "â­â­â­â­â˜†", name: "Ricardo Mendes", city: "Belo Horizonte/MG", text: "Boa qualidade, espuma dura bastante." },
  { stars: "â­â­â­â­â­", name: "Juliana Costa", city: "Curitiba/PR", text: "Chegou antes do prazo, produto igual anÃºncio." },
  { stars: "â­â­â­â­â­", name: "Marcos VinÃ­cius", city: "Rio de Janeiro/RJ", text: "Ã“timo custo-benefÃ­cio, recomendo." },
  { stars: "â­â­â­â­â­", name: "Fernanda Lopes", city: "Campinas/SP", text: "Vendedor confiÃ¡vel, comprarei novamente." },
  { stars: "â­â­â­â­â˜†", name: "Lucas Andrade", city: "Fortaleza/CE", text: "Entrega rÃ¡pida, produto aprovado." },
  { stars: "â­â­â­â­â­", name: "Paula Nunes", city: "Porto Alegre/RS", text: "Excelente qualidade, festa garantida." }
];

let reviewsIndex = 0;
const reviewsPerPage = 3;

const reviewsList = document.getElementById("reviews-list");
const loadMoreBtn = document.getElementById("loadMore");

function renderReviews() {
  const slice = reviewsData.slice(reviewsIndex, reviewsIndex + reviewsPerPage);

  slice.forEach(r => {
    const div = document.createElement("div");
    div.className = "review";
    div.innerHTML = `
      ${r.stars}
      <strong>${r.name}</strong> â€“ ${r.city}
      <p class="review-text">${r.text}</p>
    `;
    reviewsList.appendChild(div);
  });

  reviewsIndex += reviewsPerPage;

  if (reviewsIndex >= reviewsData.length) {
    loadMoreBtn.style.display = "none";
  }
}

loadMoreBtn.addEventListener("click", renderReviews);

// inicial
renderReviews();

</script>


</body>
</html>
